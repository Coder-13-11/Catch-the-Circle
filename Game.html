<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Catch the Circle - Modern Game</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

  body {
    margin: 0;
    font-family: 'Inter', sans-serif;
    background: linear-gradient(135deg, #c3f0f2, #f7f8fc);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
  }

  h1 {
    font-size: 3rem;
    color: #333;
    margin-bottom: 40px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
  }

  #landingPage {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    width: 90%;
    max-width: 600px;
    background: rgba(255,255,255,0.95);
    padding: 40px 30px;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.1);
  }

  .optionGroup {
    display: flex;
    gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
    width: 100%;
  }

  button.optionBtn, #goBtn {
    flex: 1 1 45%;
    min-height: 80px;
    font-size: 1.5rem;
    font-weight: 600;
    border: 3px solid transparent;
    border-radius: 16px;
    cursor: pointer;
    transition: 0.2s;
    color: white;
    background: linear-gradient(45deg, #6ac8f1, #1a8cff);
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
  }

  button.optionBtn:hover, #goBtn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  }

  button.selected {
    border: 3px solid #ff6a6a;
  }

  #goBtn {
    width: 100%;
    min-height: 90px;
    font-size: 1.8rem;
    background: linear-gradient(135deg, #ff6a6a, #ff3d3d);
  }

  input[type="text"], input[type="file"] {
    padding: 10px;
    border-radius: 12px;
    border: 1px solid #ccc;
    font-size: 16px;
    margin-top: 5px;
    width: 100%;
  }

  input[type="file"]:hover {
    border-color: #1a8cff;
  }
  #gameArea {
    position: relative;
    width: 800px;
    height: 500px;
    background: linear-gradient(145deg, #e0f7fa, #b2ebf2);
    border-radius: 20px;
    border: 2px solid rgba(0,0,0,0.1);
    display: none;
    overflow: hidden;
    box-shadow: 0 15px 40px rgba(0,0,0,0.1);
    margin-top: 20px;
  }

  #scoreBoard, #timer, #levelDisplay {
    position: absolute;
    font-size: 20px;
    font-weight: 600;
    padding: 10px 18px;
    border-radius: 12px;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    backdrop-filter: blur(4px);
  }

  #scoreBoard { top: 15px; left: 15px; }
  #timer { top: 15px; right: 15px; }
  #levelDisplay { bottom: 15px; left: 15px; }

  #highScoreDisplay {
    position: absolute;
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 22px;
    font-weight: 700;
    padding: 14px 28px;
    border-radius: 16px;
    background-color: #ffeb3b;
    color: #333;
    text-align: center;
    box-shadow: 0 0 15px gold, 0 0 35px #ffe54c;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { transform: translateX(-50%) scale(1); }
    50% { transform: translateX(-50%) scale(1.05); }
  }

  .circle {
    position: absolute;
    width: 55px;
    height: 55px;
    background-color: #ff4d4f;
    cursor: pointer;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    color: #fff;
    font-size: 22px;
    transition: transform 0.2s, background 0.3s;
  }

  .circle:hover {
    transform: scale(1.15);
    background: #ff7875;
  }

  #exitBtn {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 18px;
    padding: 8px 15px;
    background: #ff4d4f;
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }

  #exitBtn:hover {
    transform: translateY(-2px);
    box-shadow: 0 7px 20px rgba(0,0,0,0.25);
  }

  /* Leaderboard */
  #leaderboard {
    display: none;
    margin-top: 30px;
    width: 90%;
    max-width: 600px;
    background: rgba(255,255,255,0.95);
    padding: 20px 25px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }

  #leaderboard h2 {
    text-align: center;
    margin-bottom: 15px;
    color: #333;
  }

  #leaderboard ul {
    list-style: none;
    padding: 0;
  }

  #leaderboard li {
    font-size: 18px;
    margin-bottom: 10px;
    padding: 8px 12px;
    border-radius: 8px;
    background: rgba(240,240,240,0.7);
  }

  footer {
    font-size: 12px;
    color: #666;
    margin-top: 20px;
  }

</style>
</head>
<body>

<h1>Catch the Circle</h1>

<div id="landingPage">
  <div class="optionGroup">
    <button class="optionBtn" onclick="selectDifficulty('Easy', this)">Easy</button>
    <button class="optionBtn" onclick="selectDifficulty('Medium', this)">Medium</button>
    <button class="optionBtn" onclick="selectDifficulty('Hard', this)">Hard</button>
  </div>

  <div class="optionGroup">
    <button class="optionBtn" onclick="selectShape('circle', this)">Circle</button>
    <button class="optionBtn" onclick="selectShape('square', this)">Square</button>
    <button class="optionBtn" onclick="selectShape('triangle', this)">Triangle</button>
    <input type="file" id="customShape" accept="image/*" onchange="uploadShape(event)">
  </div>

  <input type="text" id="playerName" placeholder="Enter your name (optional)">

  <button id="goBtn" onclick="startGame()">Go</button>
</div>

<div id="gameArea">
  <button id="exitBtn" onclick="exitGame()">Exit</button>
  <div id="scoreBoard">Score: 0</div>
  <div id="timer">Time: 60</div>
  <div id="levelDisplay">Level: 1</div>
  <div id="highScoreDisplay">High Score: 0</div>
  <div class="circle" id="circle"></div>
</div>

<div id="leaderboard">
  <h2>Leaderboard</h2>
  <ul id="leaderboardList"></ul>
</div>

<footer>Game developed by Karthikeya</footer>

<script>
let selectedDifficulty = null;
let selectedShape = 'circle';
let selectedDifficultyBtn = null;
let selectedShapeBtn = null;

function selectDifficulty(diff, btn) {
  selectedDifficulty = diff;
  if(selectedDifficultyBtn) selectedDifficultyBtn.classList.remove('selected');
  selectedDifficultyBtn = btn;
  btn.classList.add('selected');
}

function selectShape(shape, btn) {
  selectedShape = shape;
  if(selectedShapeBtn) selectedShapeBtn.classList.remove('selected');
  selectedShapeBtn = btn;
  btn.classList.add('selected');
}

const circle = document.getElementById('circle');
const gameArea = document.getElementById('gameArea');
const scoreBoard = document.getElementById('scoreBoard');
const timerDisplay = document.getElementById('timer');
const levelDisplay = document.getElementById('levelDisplay');
const highScoreDisplay = document.getElementById('highScoreDisplay');
const landingPage = document.getElementById('landingPage');
const leaderboardDiv = document.getElementById('leaderboard');
const leaderboardList = document.getElementById('leaderboardList');
const playerNameInput = document.getElementById('playerName');

let score = 0;
let timeLeft = 60;
let level = 1;
let speed = 1000;
let timer;
let moveInterval;

let highScore = localStorage.getItem('catchCircleHighScore') || 0;
highScoreDisplay.textContent = `High Score: ${highScore}`;

function startGame() {
  if (!selectedDifficulty) { alert("Select a difficulty first!"); return; }

  if (selectedDifficulty === 'Easy') { speed = 1200; timeLeft = 60; }
  else if (selectedDifficulty === 'Medium') { speed = 900; timeLeft = 45; }
  else { speed = 700; timeLeft = 30; }

  changeShape(selectedShape);

  landingPage.style.display = 'none';
  gameArea.style.display = 'block';
  leaderboardDiv.style.display = 'block';

  score = 0; level = 1;
  scoreBoard.textContent = `Score: ${score}`;
  levelDisplay.textContent = `Level: ${level}`;
  timerDisplay.textContent = `Time: ${timeLeft}`;

  moveCircle();
  moveInterval = setInterval(moveCircle, speed);

  timer = setInterval(() => {
    timeLeft--;
    timerDisplay.textContent = `Time: ${timeLeft}`;
    if (score > 0 && score % 5 === 0) levelUp();
    if (timeLeft <= 0) endGame();
  }, 1000);

  updateLeaderboard();
}

function moveCircle() {
  const maxX = gameArea.clientWidth - circle.offsetWidth;
  const maxY = gameArea.clientHeight - circle.offsetHeight;
  const randomX = Math.floor(Math.random() * maxX);
  const randomY = Math.floor(Math.random() * maxY);
  circle.style.left = randomX + 'px';
  circle.style.top = randomY + 'px';
}

circle.addEventListener('click', () => {
  score++;
  scoreBoard.textContent = `Score: ${score}`;
});

function levelUp() {
  level++;
  levelDisplay.textContent = `Level: ${level}`;
  if (speed > 300) speed -= 100;
  clearInterval(moveInterval);
  moveInterval = setInterval(moveCircle, speed);
  if (timeLeft > 10) timeLeft -= 5;
}

function endGame() {
  clearInterval(timer);
  clearInterval(moveInterval);
  const playerName = playerNameInput.value || "Anonymous";

  if (score > highScore) {
    highScore = score;
    localStorage.setItem('catchCircleHighScore', highScore);
    alert(`New High Score! Score: ${score}, Level: ${level}`);
  } else {
    alert(`Game Over! Score: ${score}, Level: ${level}`);
  }

  saveScore(score, playerName);
  showLanding();
}

function changeShape(shape) {
  circle.style.borderRadius = shape === 'circle' ? '50%' : shape === 'square' ? '0%' : '50% 0 50% 0';
  circle.style.backgroundImage = '';
  circle.style.backgroundSize = 'cover';
}

function uploadShape(event) {
  const file = event.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(e) {
    circle.style.backgroundImage = `url(${e.target.result})`;
    circle.style.backgroundSize = 'cover';
    circle.style.borderRadius = '0%';
  };
  reader.readAsDataURL(file);
}

function exitGame() {
  clearInterval(timer);
  clearInterval(moveInterval);
  showLanding();
}

function showLanding() {
  gameArea.style.display = 'none';
  landingPage.style.display = 'flex';
}

function saveScore(score, name) {
  let scores = JSON.parse(localStorage.getItem('leaderboardScores') || '[]');
  scores.push({name: name, score: score});
  scores.sort((a,b)=>b.score-a.score);
  scores = scores.slice(0,5);
  localStorage.setItem('leaderboardScores', JSON.stringify(scores));
  updateLeaderboard();
}

function updateLeaderboard() {
  let scores = JSON.parse(localStorage.getItem('leaderboardScores') || '[]');
  leaderboardList.innerHTML = '';
  scores.forEach((s,i) => {
    let li = document.createElement('li');
    li.textContent = `${i+1}. ${s.name} - ${s.score}`;
    leaderboardList.appendChild(li);
  });
}

</script>

</body>
</html>
